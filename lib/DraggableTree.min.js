var DraggableTree=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/lib",t(t.s=0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";r(2),e.exports=r(7).default},function(e,t,r){var n=r(3);"string"==typeof n&&(n=[[e.i,n,""]]);var o={};o.transform=void 0,r(5)(n,o),n.locals&&(e.exports=n.locals)},function(e,t,r){t=e.exports=r(4)(void 0),t.push([e.i,".layers{width:500px;background-color:hsla(0,0%,44%,.1);opacity:1;transition:transform .3s;display:flex;flex-direction:column;box-shadow:1px 0 1px rgba(0,0,0,.2)}.layers .layer{position:relative;clear:both;overflow:hidden;height:50px;border-top:1px solid transparent;border-bottom:1px solid rgba(0,0,0,.12);-webkit-touch-callout:none;-webkit-user-select:none;padding:0 10px;display:flex;flex-direction:row;justify-content:flex-start;align-items:center}.layers .child-layers{box-sizing:border-box;padding-left:9px;border-left:2px solid transparent;clear:both;-webkit-transition:border-left-color .3s ease-out;-o-transition:border-left-color .3s ease-out;transition:border-left-color .3s ease-out}.layers .layer.selected,.layers .layer.selected:hover{background-color:rgba(0,0,255,.4);opacity:1;text-decoration:none;color:#fff}.layers .layer:hover{background-color:rgba(0,0,255,.2)}.layers .layer-box.over{background-color:rgba(45,48,52,.3)}.layers .layer.show-top-line{border-top:1px solid #1e96fd}.layers>.layer-box.holder>.layer,.layers>.layer-box.holder>.layer:hover{background-color:transparent;border-bottom:none}",""])},function(e,t){function r(e,t){var r=e[1]||"",o=e[3];if(!o)return r;if(t&&"function"==typeof btoa){var i=n(o);return[r].concat(o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"})).concat([i]).join("\n")}return[r].join("\n")}function n(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=r(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(n[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),t.push(a))}},t}},function(e,t,r){function n(e,t){for(var r=0;r<e.length;r++){var n=e[r],o=h[n.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](n.parts[i]);for(;i<n.parts.length;i++)o.parts.push(c(n.parts[i],t))}else{for(var a=[],i=0;i<n.parts.length;i++)a.push(c(n.parts[i],t));h[n.id]={id:n.id,refs:1,parts:a}}}}function o(e,t){for(var r=[],n={},o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],d=i[1],s=i[2],l=i[3],c={css:d,media:s,sourceMap:l};n[a]?n[a].parts.push(c):r.push(n[a]={id:a,parts:[c]})}return r}function i(e,t){var r=v(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=b[b.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function a(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function d(e){var t=document.createElement("style");return e.attrs.type="text/css",l(t,e.attrs),i(e,t),t}function s(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",l(t,e.attrs),i(e,t),t}function l(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})}function c(e,t){var r,n,o,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var l=m++;r=y||(y=d(t)),n=u.bind(null,r,l,!1),o=u.bind(null,r,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=s(t),n=p.bind(null,r,t),o=function(){a(r),r.href&&URL.revokeObjectURL(r.href)}):(r=d(t),n=f.bind(null,r),o=function(){a(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}function u(e,t,r,n){var o=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=S(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function f(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function p(e,t,r){var n=r.css,o=r.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(n=x(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([n],{type:"text/css"}),d=e.href;e.href=URL.createObjectURL(a),d&&URL.revokeObjectURL(d)}var h={},g=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),v=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e.call(this,r)),t[r]}}(function(e){return document.querySelector(e)}),y=null,m=0,b=[],x=r(6);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=g()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=o(e,t);return n(r,t),function(e){for(var i=[],a=0;a<r.length;a++){var d=r[a],s=h[d.id];s.refs--,i.push(s)}e&&n(o(e,t),t);for(var a=0;a<i.length;a++){var s=i[a];if(0===s.refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete h[s.id]}}}};var S=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o))return e;var i;return i=0===o.indexOf("//")?o:0===o.indexOf("/")?r+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")"})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,d=e[Symbol.iterator]();!(n=(a=d.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&d.return&&d.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function t(){return Math.floor(65536*(1+Math.random()))}function r(e,t){if("[object Array]"!==Object.prototype.toString.call(t))return t;var r=t.findIndex(function(t){return t===e});return-1!==r&&t.splice(r,1),t}function i(e,t,r){if("[object Array]"!==Object.prototype.toString.call(r))return r;var n=r.findIndex(function(t){return t===e});return r.splice(n,0,t),r}function a(e){var t=document.createElement("div"),r=document.createElement("div"),n=document.createElement("div");return t.classList.add("layer-box"),r.classList.add("layer"),r.style.height=s+"px",r.setAttribute("draggable","true"),r.setAttribute("data-id",e.id),r.innerHTML=e.data||e.id,n.classList.add("child-layers"),t.appendChild(r),t.appendChild(n),t}function d(e){if(this.init(e),!this.__check())return this;this.mountDom.classList.add("layers"),this.render();var t=this;this.mountDom.addEventListener("mousedown",function(e){var r=e.target,n=r.getAttribute("data-id");if(n){if(t.__selectNode(n),r.classList.contains("selected"))return void("function"==typeof t.click&&t.click(e,n));t.multiSelect||(e.currentTarget.querySelectorAll("layer"),e.currentTarget.querySelectorAll(".layer.selected").forEach(function(e){e.classList.remove("selected")})),r.classList.add("selected"),"function"==typeof t.click&&t.click(n)}}),this.mountDom.addEventListener("dragstart",function(e){var r=e.target,n=r.getAttribute("data-id");e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",null),t.draggingNode=t.map.get(n),t.__selectNode(n),t.multiSelect&&(e.currentTarget.querySelectorAll("layer"),e.currentTarget.querySelectorAll(".layer.selected").forEach(function(t){t!==e.target&&t.classList.remove("selected")})),"function"==typeof t.dragStart&&t.dragStart(e,n)}),this.mountDom.addEventListener("dragleave",function(e){var r=e.target,n=r.getAttribute("data-id");r.parentNode.classList.remove("over"),r.classList.remove("show-top-line"),t.dropTarget.id===n&&(t.dropTarget=null),"function"==typeof t.dragLeave&&t.dragLeave(e,n)}),this.mountDom.addEventListener("drop",function(e){var r=e.target,n=r.getAttribute("data-id");null===n&&(r=r.closest(".layer"),n=r.getAttribute("data-id")),"function"==typeof t.beforeDrop?t.beforeDrop(t.draggingNode.id,t.dropTarget.id,t.dropTarget.type).then(function(){t.dropTarget.id===n&&t.draggingNode&&t.__modifyTreeLevel(t.draggingNode,t.map.get(t.dropTarget.id),t.dropTarget.type),"function"==typeof t.drop&&t.drop(t.draggingNode.id,t.dropTarget.id,t.dropTarget.type)}):(t.dropTarget.id===n&&t.draggingNode&&t.__modifyTreeLevel(t.draggingNode,t.map.get(t.dropTarget.id),t.dropTarget.type),"function"==typeof t.drop&&t.drop(t.draggingNode.id,t.dropTarget.id,t.dropTarget.type))},!1),this.mountDom.addEventListener("dragend",function(e){t.mountDom.querySelectorAll(".layer-box.over").forEach(function(e){e.classList.remove("over")}),t.mountDom.querySelectorAll(".layer.show-top-line").forEach(function(e){e.classList.remove("show-top-line")}),"function"==typeof t.dragEnd&&t.dragEnd(e,t.draggingNode.id)},!1),this.mountDom.addEventListener("dragover",function(e){e.preventDefault();var r=e.target,n=r.getAttribute("data-id");null===n&&(r=r.closest(".layer"),n=r.getAttribute("data-id"));var o=r.getBoundingClientRect(),i=e.clientY-o.top;n&&i>s/3&&i<=s?(r.parentNode.classList.add("over"),r.classList.remove("show-top-line"),t.dropTarget={id:n,type:l.in}):(r.classList.add("show-top-line"),r.parentNode.classList.remove("over"),t.dropTarget={id:n,type:l.upon}),"function"==typeof t.dragOver&&t.dragOver(e,t.draggingNode.id,t.dropTarget.id,t.dropTarget.type)},!1)}var s=50,l={in:1,upon:2},c=new Map;return d.prototype.init=function(t){this.id="draggable-tree-"+e(),this.mountDom=t.mountDom instanceof HTMLElement?t.mountDom:document.querySelector(t.mountDom),this.rootList=t.list||t.rootList||[],this.map=t.map instanceof Map?new Map(t.map):new Map,this.multiSelect=t.multiSelect||!1,this.click=t.click,this.dragStart=t.dragStart,this.dragOver=t.dragOver,this.dragLeave=t.dragLeave,this.dragEnd=t.dragEnd,this.drop=t.drop,this.changed=t.changed,this.beforeDrop=t.beforeDrop,this.topParent="Root",this.draggingNode=null,this.dropTarget=null,this.selectingIdSet=new Set,this.hasHolder=!1},d.prototype.__check=function(){var e=!0,t={key:null,expecting:null,received:null};for(var r in this){if(!1===e)break;this.hasOwnProperty(r)&&("mountDom"===r&&(e=this[r]instanceof HTMLElement,t.expecting="HTMLElement or a selector"),-1!==["click","drop","dragStart","dragOver","dragLeave","dragEnd","changed","beforeDrop"].indexOf(r)&&void 0!==this[r]&&(e="function"==typeof this[r],t.expecting="function"),e||(t.key=r,t.received=o(this[r])))}return e||(t.key,t.expecting,t.received),e},d.prototype.__getNodeDomById=function(e){switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null){case"children":return this.mountDom.querySelector('div[data-id="'+e+'"]').nextElementSibling;case"box":return this.mountDom.querySelector('div[data-id="'+e+'"]').parentNode;case"holder-box":return this.mountDom.querySelector(".layer-box.holder");default:return this.mountDom.querySelector('div[data-id="'+e+'"]')}},d.prototype.__selectNode=function(e){this.multiSelect||this.selectingIdSet.clear(),this.selectingIdSet.add(e)},d.prototype.__createDom=function(e,t){var r=a(e);if(t)this.__getNodeDomById(t.id,"children").appendChild(r);else{var n=this.__getNodeDomById(null,"holder-box");this.mountDom.insertBefore(r,n)}this.hasHolder||this.__renderHolderLayer()},d.prototype.__renderDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rootList,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mountDom;t||(t=this.mountDom);var r=!0,o=!1,i=void 0;try{for(var d,s=Object.entries(e)[Symbol.iterator]();!(r=(d=s.next()).done);r=!0){var l=n(d.value,2),c=l[1],u=this.map.get(c),f=a(u);t.appendChild(f),u.children.length>0&&this.__renderDom(u.children,this.__getNodeDomById(u.id,"children"))}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}},d.prototype.__renderHolderLayer=function(){if(!this.hasHolder){var e=document.createElement("div"),t=document.createElement("div");e.classList.add("layer-box","holder"),t.classList.add("layer"),t.style.height=s+"px",e.appendChild(t),this.mountDom.appendChild(e),this.hasHolder=!0}},d.prototype.__getNodeById=function(e){return this.map.get(e)},d.prototype.__modifyTreeLevel=function(e,t,n){if(t){var o=e.parentId===this.topParent?null:this.map.get(e.parentId),a=t.parentId===this.topParent?null:this.map.get(t.parentId),d=this.__getNodeDomById(e.id,"box"),s=this.__getNodeDomById(t.id);if(d.contains(s))return;n===l.in&&(r(e.id,o?o.children:this.rootList),e.parentId=t.id,t.children=t.children.concat([e.id]),s.nextElementSibling.appendChild(d)),n===l.upon&&(e.parentId!==t.parentId&&o?r(e.id,o.children):r(e.id,this.rootList),e.parentId=t.parentId,a?i(t.id,e.id,a.children):i(t.id,e.id,this.rootList),s.parentNode.parentNode.insertBefore(d,s.parentNode))}else{var c=e.parentId===this.topParent?null:this.map.get(e.parentId),u=this.__getNodeDomById(e.id,"box"),f=this.__getNodeDomById(null,"holder-box");r(e.id,c?c.children:this.rootList),e.parentId="Root",this.rootList.push(e.id),this.mountDom.insertBefore(u,f)}"function"==typeof this.changed&&this.changed("move node",e.id,t?t.id:"holder",n)},d.prototype.createNode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.topParent,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.id||"draggable-tree-node-"+e(),o=void 0;if(!this.map.has(n)){if((t=t||this.topParent)===this.topParent)this.rootList.push(n),o=null;else{if(!(o=this.map.get(t)))return;o.children.push(n)}r.id=n,r.parentId=t,r.children=r.children||[],this.map.set(n,r),this.__createDom(r,o),"function"==typeof this.changed&&this.changed("create node",r.id)}},d.prototype.deleteNode=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!t&&this.selectingIdSet.size>0)return void this.selectingIdSet.forEach(function(t){e.deleteNode(t)});var n=this.__getNodeById(t);if(n){var o=void 0;if(n.parentId===this.topParent)o=this.rootList;else{var i=this.__getNodeById(n.parentId);o=i?i.children:null}if(n.children.length>0){var a=!0,d=!1,s=void 0;try{for(var l,c=n.children[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;this.deleteNode(u)}}catch(e){d=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(d)throw s}}}if(o){r(t,o),this.map.delete(t);var f=this.__getNodeDomById(t,"box");f.parentNode.removeChild(f)}}},d.prototype.remove=function(){var e=this,t=[];return this.selectingIdSet.forEach(function(r){t.push(new Promise(function(t,n){try{e.deleteNode(r),t(r)}catch(e){n(e)}}).then(function(){e.selectingIdSet.delete(r)}))}),Promise.all(t)},d.prototype.clearSelected=function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.selectingIdSet[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value,a=this.__getNodeDomById(i);a&&a.classList.remove("selected")}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}this.selectingIdSet.clear()},d.prototype.removeAll=function(){var e=this;return this.rootList=[],this.map=new Map,this.hasHolder=!1,new Promise(function(t,r){try{for(;e.mountDom.hasChildNodes();)e.mountDom.removeChild(e.mountDom.lastChild);t()}catch(e){r(e)}})},d.prototype.render=function(e,t){var r=this;this.__renderDom(),setTimeout(function(){r.__renderHolderLayer()},1)},d.prototype.updateOptions=function(e){this.multiSelect="boolean"==typeof e.multiSelect?e.multiSelect:this.multiSelect,this.click="function"==typeof e.click?e.click:this.click,this.dragStart="function"==typeof e.dragStart?e.dragStart:this.dragStart,this.dragOver="function"==typeof e.dragOver?e.dragOver:this.dragOver,this.dragLeave="function"==typeof e.dragLeave?e.dragLeave:this.dragLeave,this.dragEnd="function"==typeof e.dragEnd?e.dragEnd:this.dragEnd,this.drop="function"==typeof e.drop?e.drop:this.drop,this.changed="function"==typeof e.changed?e.changed:this.changed,this.beforeDrop="function"==typeof e.beforeDrop?e.beforeDrop:this.beforeDrop},{create:function(e){var t=void 0;t=new d(e);var r={getRootList:function(){return t.rootList},getMap:function(){return t.map},createNode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.topParent,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.createNode(e,r),this},deleteNode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t.deleteNode(e),this},removeAll:function(){return t.removeAll().then(function(){"function"==typeof t.changed&&t.changed("empty nodes")}),this},remove:function(){var e=Array.from(t.selectingIdSet.values());return t.remove().then(function(){"function"==typeof t.changed&&t.changed("delete node",e)}),this},clearSelected:function(){return t.clearSelected(),this},toggleMultiSelect:function(){return t.multiSelect&&t.clearSelected(),t.multiSelect=!t.multiSelect,this},render:function(e,r){return t.removeAll().then(function(){t.rootList=e instanceof Array?e:[],t.map=r instanceof Map?new Map(r):new Map,t.map.size>0&&t.render(e,r)}),this},setEvents:function(e){return t.updateOptions(e),t.__check(),this}};return c.set(t.id,{tree:t,operator:r}),r},getTrees:function(){return Array.from(c.values()).map(function(e){return e.operator})}}}();t.default=i}]);